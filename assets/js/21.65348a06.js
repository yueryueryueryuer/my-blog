(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{274:function(a,s,t){"use strict";t.r(s);var e=t(2),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"docker-常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-常用命令"}},[a._v("#")]),a._v(" Docker 常用命令")]),a._v(" "),t("ol",[t("li",[a._v("查看正在运行的容器")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("查看所有的容器")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" -a\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[a._v("查看本地镜像")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker images\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[a._v("从镜像中运行/停止一个新实例")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker run/stop --help\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker run/stop container\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[a._v("避免输出 Sudo")])]),a._v(" "),t("blockquote",[t("p",[a._v("这里把当前用户加入到 docker 组就可以直接使用命令，而不用每次都加 sudo")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("groupadd")]),a._v(" docker\n")])])]),t("blockquote",[t("p",[a._v("改完后需要重新登陆用户")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" gpasswd -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("USER")]),a._v("}")]),a._v(" docker\n")])])]),t("ol",{attrs:{start:"6"}},[t("li",[a._v("Docker 版本")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker --version\n")])])]),t("ol",{attrs:{start:"7"}},[t("li",[a._v("搜索 Docker Image")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker search tutorial\n")])])]),t("blockquote",[t("p",[t("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker Hub"),t("OutboundLink")],1)])]),a._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[a._v("通过 docker 命令下载 tutorial 镜像")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker pull learn/tutorial\n")])])]),t("ol",{attrs:{start:"9"}},[t("li",[a._v("从指定 image 里生成一个 container 并在其中运行一个命令")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("image"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("cmd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"10"}},[t("li",[a._v("在 container 里运行交互式命令，比如 shell")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run -i -t "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("image"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("cmd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\ndocker run -i -t ubuntu /bin/bash\n")])])]),t("ol",{attrs:{start:"11"}},[t("li",[a._v("在 container 里运行后台任务")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run -d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("image"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("cmd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"12"}},[t("li",[a._v("列出最近一个运行过的 container")])]),a._v(" "),t("blockquote",[t("p",[a._v("不加"),t("code",[a._v("-l")]),a._v(" 则只列出正在运行的 container（比如后台任务）")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" -l\n")])])]),t("ol",{attrs:{start:"13"}},[t("li",[a._v("列出所有 container")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" -a\n")])])]),t("ol",{attrs:{start:"14"}},[t("li",[a._v("查看 container 详情")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker inspect "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"15"}},[t("li",[a._v("删除某个 container")])]),a._v(" "),t("blockquote",[t("p",[a._v("其中 container_id 不需要输入完整，只要能保证唯一即可。")]),a._v(" "),t("p",[a._v("运行中的 Docker 容器是无法删除的，必须先通过 "),t("code",[a._v("docker stop")]),a._v(" 或者 "),t("code",[a._v("docker kill")]),a._v(" 命令停止。")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" -a -q"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" 删除所有容器，-q表示只返回容器的ID\n")])])]),t("ol",{attrs:{start:"16"}},[t("li",[a._v("再次运行某个 container")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker start "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"17"}},[t("li",[a._v("查看某个 container 的运行日志")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker logs "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\ndocker logs -f "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 类似tailf\n")])])]),t("ol",{attrs:{start:"18"}},[t("li",[a._v("切换到后台任务 container, 需要当前容器正常运行")])]),a._v(" "),t("blockquote",[t("p",[a._v("注意：切换到后台任务以后无法用"),t("kbd",[a._v("Ctrl")]),a._v("+"),t("kbd",[a._v("C")]),a._v(" 退出")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker attach "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",[t("li",[a._v("中止后台任务 container")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker stop "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"20"}},[t("li",[a._v("将 container 保存为一个 image")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker commit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("image_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"21"}},[t("li",[a._v("将 image 上传到仓库")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker push "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("image_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"22"}},[t("li",[a._v("删除 images")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker rmi "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("image id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"23"}},[t("li",[a._v("为容器指定名称，容器的名称是唯一")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run --name edison -i -t ubuntu /bin/bash\n")])])]),t("ol",{attrs:{start:"24"}},[t("li",[a._v("有三种方式可以唯一指代容器")])]),a._v(" "),t("p",[a._v("短 UUID: 716d3c16dc65（12 位）")]),a._v(" "),t("p",[a._v("长 UUID：716d3c16dc654230ada14f555faadd036474231dfca0ca44b597574a5c618565（64 位）")]),a._v(" "),t("p",[a._v("名称: edison")]),a._v(" "),t("ol",{attrs:{start:"25"}},[t("li",[a._v("当前 Docker 宿主机的信息")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker info\n")])])]),t("ol",{attrs:{start:"26"}},[t("li",[a._v("查看容器内部的进程信息")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("top")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ol",{attrs:{start:"27"}},[t("li",[a._v("在容器中运行后台任务，只对正在运行的容器有效。")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("cmd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -d edison "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" /home/haha\n")])])]),t("ol",{attrs:{start:"28"}},[t("li",[a._v("在容器中运行交付式任务，只对正在运行的容器有效。")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -t -i edison /bin/bash\n")])])]),t("blockquote",[t("p",[a._v("注：在"),t("code",[a._v("/var/lib/docker")]),a._v("中，可以查看 "),t("code",[a._v("Docker Image")]),a._v("、"),t("code",[a._v("Container")]),a._v(" 和 "),t("code",[a._v("Volumes")]),a._v(" 等细节信息。")])]),a._v(" "),t("ol",{attrs:{start:"29"}},[t("li",[a._v("进入容器")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -it "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" /bin/bash\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" dingtalk-work-message:/dingTalkWorkMessageLog/dingTalkWorkMessage.2021-01-11.log /home/zgyxapp/\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);